 ### Курсы
[Курсы по git webdevkin.ru](https://webdevkin.ru/courses/git/setup-settings)
#### Урок 1.1 Установка и базовая настройка git

<h4>Проверка версии:</h4>

```
git --version
```

<h4>Базовые настройки:</h4>

> [!NOTE] Title
> Настройки которые будут распространяться на все проекты

```
git config --global user.name "Vladimir Kolchin"
```
```
git config --global user.email "Kolchin_Vladimir@mail.ru"
```
```
# Просмотр всех глобальных настроек
git config --list
```

#### Урок 1.2 Установка и базовая настройка git

```
# Полный список всех команд
git --help
```
```
# Подробная справка по команде
git log --help
```

#### Урок 2.1 Создание и клонирование репозитория
[Ссылка на урок](https://webdevkin.ru/courses/git/clone-init)
```
# Клонирование репозиотрия
git clone https://github.com/vuejs/vue.git
```
```
# Клонирование в другую папку
git clone https://github.com/vuejs/vue.git vue-new
```
```
# Генерирование ssh ключа
ssh-keygen -t rsa -b 4096 -C "Kolchin_Vladimir@mail.ru"
```

<h4>Добавление существующего репозитория</h4>
1. В git-e создать аналогичный проект по названию папки локального проекта
![[Снимок экрана от 2025-05-12 11-11-13.png]]
![[Снимок экрана от 2025-05-12 11-12-22.png]]
2. Переходим в папку с репозиторием
```
cd second-site
```
3. Инициализировать репозиторий
```
git init
```
4. Добавить файлы из каталога
```
git add .
```
5. Сделать commit
```
git commit -m "Inital commit"
```
6. Добавить в список наш удалённый репозиторий
```
git remote add origin git@github.com:dreadsolnce/second-site.git
```
7. Запушить репозиторий
```
git push -u origin main
```
#### Урок 3 git status и git diff

```
# Просмотр изменённых файлов
git status
```
![[Снимок экрана от 2025-05-12 17-52-55.png]]
```
# Просмотр изменений
git diff
```
![[Снимок экрана от 2025-05-12 17-53-40.png]]
```
# Изменения по конкретному файлу
git diff index.html
```
```
# Отмена всех изменений
git restore index.html
```
![[Снимок экрана от 2025-05-12 18-07-30.png]]
#### Урок 4.1 Коммиты и история коммитов  
```
# Добавление файлов к коммиту
git add index.html
```
```
# Добавление всех файлов к коммиту
git add .
```
![[Снимок экрана от 2025-05-13 10-07-12.png]]
```
# Фиксирование изменений (изменения уйдут в историю)
git commit -m 'Add new block students to main page'
```
```
# Просмотр комитов
git log
```
![[Снимок экрана от 2025-05-13 10-12-05.png]]
```
# Просмотр коммита (просмотр что в нем менялось)
git show 17e0ab6e4d17148c48623cc5e6f510b0cca8ce4b
```

![[Снимок экрана от 2025-05-14 10-48-08.png]]
```
# Новые файлы автоматом попадают в неотслеживаемы.
# Чтобы добавить их в отслеживаемые необходимо их добавить:
git add about.html
git commit -m "Added new file about.html"
```

```
# Одновременное добавление и создание комита
git commit -a -m 'Fixed footer'
```

```
# Если переименовать файл в проводнике, то гит воспринимает это
# как будто старый файл удалён, а новый файл с новым именем попадает в неотслеживаемые
```
![[Снимок экрана от 2025-05-14 10-54-54.png]]
```
git add .
```
![[Снимок экрана от 2025-05-14 10-56-25.png]]

<b>Удаление</b> (отключение) файла из подготовленных к коммиту.
При этом изменения внесённые ни куда не деваются. Это 
может понадобится в случае, если мы по ошибке добавили все файлы к
коммиту, а рекомендуется добавлять в коммиты файлы только
для конкретной задачи. А потом сделать следующий коммит с другим 
изменённым файлом.
```
git reset css/main.css
```
![[Снимок экрана от 2025-05-14 11-27-12.png]]
![[Снимок экрана от 2025-05-14 11-27-27.png]]

<b>Переименование последнего коммита</b> - только до отправки на сервер
```
git commit --amend -m 'Fixed styles'
```
![[Снимок экрана от 2025-05-14 11-31-38.png]]

#### Урок 4.2 Откат коммитов

<b>Откат коммитов</b>
```
git revert --no-edit b7e92280e1c62697f873488d6e61417a0e580776
```
#### Урок 5 История коммитов в подробностях

История коммитов с изменениями
```
git log -p
```

![[Снимок экрана от 2025-05-14 14-56-54.png]]

<div class="text3">Краткий вывод - <span> очень удобно</span></div>

```
git log --oneline 
```
![[Снимок экрана от 2025-05-14 14-57-50.png]]
Количество <b>изменений</b> в коммитах
```
git log --stat --graph
```

![[Снимок экрана от 2025-05-14 14-58-26.png]]
Отобразить все коммиты для определённого <b>файла</b>
```
git log index.html
```

Отобразить все коммиты для определённого <b>email</b>
```
git log --author=webdevkin
```

Фильтрация коммитов по <b>дате</b>
```
git log --after='2020-03-09 15:30' --befor='2020-03-09 16:00'
```

<b>Переключение</b> (путешествие) по коммитам (просмотр кода, ищем всякие ошибки):

```
git checkout 2fc2e21
```

![[Снимок экрана от 2025-05-14 15-06-07.png]]
![[Снимок экрана от 2025-05-14 15-06-20.png]]

*Возврат в исходное состояние*
```
git checkout main
```

![[Снимок экрана от 2025-05-14 15-06-48.png]]
![[Снимок экрана от 2025-05-14 15-07-07.png]]
#### Урок 6 git push и git pull

> [!NOTE] Замечание
> git clone - клонирует проект целиком (применяется один раз)
> git pull  - скачивает новые коммиты
> git push  - загрузить на сервер

<b>Запушить</b> на сервер:
```
git push origin main
```

<b>Спулить</b> с сервера:
```
git pull origin main 
```

<b>Конфликт</b> при одновременном изменении:
> [!NOTE] Важно
> Если при <b>одновременном</b> изменении какого нибудь файла 
> (мы у себя изменили и кто то изменил этот же файл и залил его уже на сервер), 
> то при попытке запушить наши изменения на сервер появляется ошибка:
> ![[Снимок экрана от 2025-05-14 17-09-47.png]]
> что говорит о том, что нам перед тем как запушить необходимо сначала спулить
> изменения с сервера

```
git pull origin main 
```

<b>но при попытке спулить возникает предупреждение</b>
[см.описание предупреждения на сайте](https://it-storm.ru/post/git-komanda-git-pull-rebase-prostymi-slovami/118):
![[Снимок экрана от 2025-05-14 17-14-47.png]]

Самый безопасный способ в этом случае - использовать `--rebase`:

```
git pull --rebase origin main
```

![[Снимок экрана от 2025-05-14 17-29-08.png]]

![[Снимок экрана от 2025-05-14 17-31-48.png]]

и затем обязательно выполнить, т.к наша ветка будет опережать удалённую

```
git push origin main
```

> [!NOTE] информация
> Для изменения стратегии git-a по умолчанию использовать команду из предупреждения:
> ```
> git config pull.rebase true
#### Урок 7 Работа с ветками

<b>Создание</b> ветки и одновременное <b>переключение</b> на нее:

```
git checkout -b news
```

<b>Переключение</b> на ветку:

```
git checkout main
```

Перед переключением на другую ветку необходимо коммитить изменения:

```
git add ,
git commit -m "описание"
```

<b>Push в ветку</b>:

```
git push origin students
```

<b>Просмотр</b> всех веток:

```
git branch
git branch -v
```

<b>Переименование</b> ветки:

```
git checkout nes
git branch -m block-news
```
 <b>Удаление</b> локальной ветки:

> [!important] замечание
> Для удаления ветки из нее сначала выйти (переключиться на другую)
> Для удаления ветки командой ниже она должна быть либо вмержена в main либо пустая:
> ```
> git branch -d block-news
> ```
>  Для удаления несмотря ни на что использовать следующую команду:
> ```
> git branch -D block-news
> ```

**Удаление удалённой ветки в локальном репозитории:

```
git branch -r origin-gitlab-localhost/production --delete
```

#### Урок 8 Ветки на сервере

Просмотр удалённых веток

```
git branch -r
```

Просмотр всех веток:

```
git branch -a
```

Обновить информацию с сервера (не скачивает ничего, а именно 
обновляет информацию о ветках которые есть на сервере как пример)

![[Снимок экрана от 2025-05-15 13-14-25.png]]
![[Снимок экрана от 2025-05-15 13-14-46.png]]
![[Снимок экрана от 2025-05-15 13-15-36.png]]
Но при этом в локальных ветках новой ветки не появилось
![[Снимок экрана от 2025-05-15 13-17-17.png]]
Что бы она появилась надо на нее переключиться git checkout news
![[Снимок экрана от 2025-05-15 13-18-22.png]]

 <b>Удаление</b> удалённой ветки на сервере:\
 
> [!important] ВНИМАНИЕ!
> Очень внимательно
> Не задаёт дополнительных вопросов

```
git push origin --delete news
```

![[Снимок экрана от 2025-05-15 13-23-30.png]]
#### Урок 9 Слияния или мерджи веток

Слить (залить) изменения из локальной ветки в локальный main:

```
# Фиксируем изменения в ветке
git add .
git commit -m "Add Index"
```

```
# Переключаемся на главную ветку
git checkout main
```
	Слить последние изменения из удаленной ветки main
	малоли кто то успел залить новые фишки
```
git pull --rebase origin main
```

```
# Мержим ветку news в main
git merge news
git log --oneline
# Пушим в удаленный репозиторий, т.к. локальный опережает удалённый
git push origin main
# Удадяем локальную ветку news
git branch -d news
```
![[Снимок экрана от 2025-05-16 15-10-08.png]]

Слить (залить) когда коллеги успели сделать изменения
в главной ветке на сервере пока мы работали над веткой
	все тоже самое, только при мерже создается новый комит
	говорящий об объеденении веток 
![[Снимок экрана от 2025-05-16 15-25-32.png]]

Мерж без вопросов (без вывода nano)
```
git merge --no-edit main
```
#### Урок 10 Конфликты и их разрешение

```
#  Работа с кодом
git checkout -b students
git add index.html
git status
git commit -m 'Add Students'
git checkout main
git pull --rebase origin main
git merge students
git log --oneline 
git push origin main
git branch -d students
```

```
git checkout -b students-redisign
git add .
git status
git commit -m 'Added styles for students'
git checkout main
--> Кто то делаем изменения на сервере в той же части кода
--> что и мы (при эотм у нас пока старая ветка main)
git pull --rebase origin main
git log --oneline
git merge students-redisign
(получаем ошибку)
```
![[Снимок экрана от 2025-05-20 15-56-49.png]]
```
открываем нашу ide с кодом и там надо вручную решить конфликт (фиксим)
```
![[Снимок экрана от 2025-05-20 16-00-57.png]]
```
git status
git add index.html
git commit -m 'Merge branch students redisign'
git log --oneline
git push origin main
git branch -d students-redisign
```

***==Жесткий сброс (обнуление истории коммитов):==***
```
git reset --hard 00dc21a
git push -f origin main
```

### Создание токена доступа с телефона

1. По ссылке [https://github.com/settings/tokens/new](https://github.com/settings/tokens/new) указать:
	- имя токена
	- выбрать: No Expiration (значит токен не устареет)
	- выбрать repo
2. создать токен (зеленая кнопка)
3. сохранить созданный токен
	- GitHub покажет токен вида `ghp_1wKdGc4IhVCHxXEaKClMNp1rEMwsHu1f5zNZ` только один раз, его нужно скопировать и сохранить. Если потеряется - придётся создавать новый.

[см. рисунок](https://habrastorage.org/r/w1560/getpro/habr/upload_files/bce/e82/ac9/bcee82ac94f9fde7344dfd29d058a98e.png)

Добавить новый удалённый репозиторий:
git remote add origin https://ghp_@github.com/dreadsolnce/note.git
### Инициализация (создание) нового репозитория

1. В директории проекта выполнить команду:
```
git init
```

> [!NOTE] Замечание
> - По умолчанию git создаёт ветку master, где будут размещаться коммиты. В gitHUB же дефолтная ветка называется main — несоответствие веток может привести к проблемам в будущем, лучше сразу переименовать ветку master в main;
> - Задать имя дефолтной ветки можно с помощью команды git config --global init.defaultBranch main, где main — название ветки. Эта команда работает до создания первого коммита;
> - Переименовать уже существующую ветку можно командой git branch -m [название ветки].

2. Задаём название дефолтной ветки для следующих всех проектов
```
git config --global init.defaultBranch main
```

3. Меняем название текущей (гоавной) ветки
```
git branch -m main
```

```
git status
```

4. Создаем можно пустой файл README.md
```
touch README.md
```

5. Добавляем все файлы в индекс
```
git add .
```

6. Проверяем
```
git status
```

7. На сайте создаем пустой (чистый репозиторий) репозиторий

8. Создаём (прописываем) новую удалённую ветку (origin) в локальном репозитории
```
git remote add origin git@gitlab.test.local:kvl/myfirstproject.git
```
либо
```
git remote add origin  http://gitlab.test.local/kvl/myfirstproject.git
```


> [!NOTE] Замечание
> если использовать url вида git@gitlab... то предваоительно надо настроить авторизацию по ssh ключу

9. Проверяем
```
git remote -v
```

10. Коммитим наши изменения
```
git commit -m "Initial commit"
```

10. Пушим в удалённый репозиторий
```
git push --set-upstream origin main
```

> [!NOTE] Title
> `git push --set-upstream` (или кратко `-u`) — это ==команда Git, которая при первой отправке изменений локальной ветки в удаленный репозиторий устанавливает связь отслеживания между ними==. После выполнения этой команды будущие команды `git pull` и `git push` для этой ветки будут автоматически знать, куда отправлять и откуда извлекать данные, без необходимости каждый раз указывать имя удаленного репозитория и имя ветки

11. Проверяем на сервере наш репозиторий


### Настройка новой ветки которую создали в gitlabe

Для того чтобы появилась новая ветка необходимо сделать 

```
git pull
git branch -a
```

### Подключение удалённого репозитория с токеном

```
git remote -v
git remote remove origin
git remote add origin https://ghp_***@github.com/dreadsolnce/note.git
git remote -v
git push origin main
```

### Создание ветки (branch)

*Создание новой ветки:*
```
git branch <name>
или
git checkout -b feature/new (сразу переключение на эту ветку)
```
![[Снимок экрана от 2025-05-07 12-14-44.png]]

*Просмотр всех веток:*
```
 git branch -a
```

 *Переключение на ветку:*
```
 git checkout <name>
```

 *Удалить локальную ветку:*
```
  git branch -d <name>
```
[^1]

 *Удалить удалённую ветку из локального репозитория:*
```
  git push origin :<name remote>
  git branch -rD <name remote>
```
[^2]

[^1]: git branch -d ansible

[^2]: git push origin :origin/ansible
git branch -rD origin/ansible

*Удалить ветку из git репозитория:*

```
git push origin --delete terraform-hotfix
```

### Объединить ветки

*Просмотр всех веток:*
```
 git branch -a
```

*Переключение на ветку, в которую вы хотите объединить изменения::*
```
 git checkout main
```

Выполните команду `git merge`, указав ветку, изменения из которой вы хотите объединить:
```
git merge bash
```

### Слить изменения из GitLab

*Переключиться на главную ветку:*
```
git checkout main
```
![[Снимок экрана от 2025-04-07 14-58-07.png]]
*Выполнить загрузку из репозитория GitLab*
```
git pull
```

### Включение HTTPS

- ***Установить программное обеспечение***
```
sudo apt install certbot
```
	
	Для веб-сервера Apache установить плагин
```
sudo apt install python3-certbot-apache
```
- ***Установить сертификат TLS***
```
sudo certbot --apache --agree-tos --redirect --hsts --staple-ocsp --must-staple --email [email]  -d tile.your-domain.com
```

> [!NOTE] Внимание
> При появлении ошибки AttributeError: module 'certbot.plugins.common' has no attribute 'TLSSNI01'
> можно попробовать способ представленный ниже

- Отредактировать файл index.html и заменить весь протокол HTTP на HTTPS
```
sudo sed -i 's/http/https/g' /var/www/index.html
```

##### Ссылки на сайты

[# Как объединить ветки в Git](https://sky.pro/wiki/javascript/kak-obuedinit-vetki-v-git/)

