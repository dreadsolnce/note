#### Настройка синхронизации

### Шаг 0: Установить Obsidian на все свои устройства

На случай если его у вас ещё нет, вот ссылка:

- [https://obsidian.md/download](https://obsidian.md/download)
    

### Шаг 1: Создать приватный репозиторий Github

1. Залогиниться на [github](https://github.com/)
    
2. По ссылке [https://github.com/new](https://github.com/new) указать:
    
    - имя репозитория
        
    - выбрать: приватный
        
    - выбрать: файл README (т.к. репозиторий не д.б. пустым)
        
3. создать репозиторий (зеленая кнопка внизу)
    
4. в корне репозитория создать файл `.gitignore` с текстом `.obsidian`
    

![Настройки нового репозитория на GitHub](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b8c/96b/9b0/b8c96b9b0cbfa41d775de64a11a0b8ac.png "Настройки нового репозитория на GitHub")

Настройки нового репозитория на GitHub

![Создание .gitignore (1/2)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/abb/6fa/625/abb6fa6257d35910acfd35e6ab5fb677.png "Создание .gitignore (1/2)")

Создание .gitignore (1/2)

![Создание .gitignore (2/2)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/0b7/b44/386/0b7b4438653dbfdad2d90607404f99ca.png "Создание .gitignore (2/2)")

Создание .gitignore (2/2)

> Комментарий: файл `.gitignore` нужен, чтобы не синхронизировать папку `.obsidian`, в которой находятся локальные настройки (конфликтуют на разных устройствах при синхронизации). Если этого не сделать — вся схема перестанет работать.

### Шаг 2: Создать токен доступа

1. По ссылке [https://github.com/settings/tokens/new](https://github.com/settings/tokens/new) указать:
    
    - имя токена
        
    - выбрать: No Expiration (значит токен не устареет)
        
    - выбрать repo
        
2. создать токен (зеленая кнопка)
    
3. сохранить созданный токен
    
    - GitHub покажет токен вида `ghp_1wKdGc4IhVCHxXEaKClMNp1rEMwsHu1f5zNZ` только один раз, его нужно скопировать и сохранить. Если потеряется - придётся создавать новый.
        

![Настройки "простого" токена доступа](https://habrastorage.org/r/w1560/getpro/habr/upload_files/bce/e82/ac9/bcee82ac94f9fde7344dfd29d058a98e.png "Настройки "простого" токена доступа")

Настройки "простого" токена доступа

Только для "параноиков"

1. [](https://github.com/settings/personal-access-tokens/new)
    

### Шаг 3: Синхронизация с десктопом (Windows, Linux, Mac)

Приведу пример для Windows.

#### 3а: клонировать репозиторий

1. Убедиться, что git установлен в системе
    
    - В консоли набрать `git --version` и увидеть версию.
        
    - Если вылезла ошибка:
        
        - **Установить** гит: [https://git-scm.com/downloads](https://git-scm.com/downloads)
            
        - **Выполнить первоначальную настройку** гит-а: в командной строке указать свои "email" и "имя" (любые), которыми будут подписываться ваши файлы в гите (у вас приватный репозиторий, значит их никто не увидит)
            
            ```
            git config --global user.email МОЙ-EMAILgit config --global user.name МОЁ-ИМЯ
            ```
            
            _Гит выполняет все операции "от имени" юзера, определённого этими двумя командами. Пока он не имеет этих данных, функционал гит-а недоступен._
            
2. Создать папку, в которой будут храниться «Vaults/Хранилище» Obsidian (Vault — это аналог Workspace в Notion). Например: `C:/OBSIDIAN` (win) или `~/OBSIDIAN`(linux).
    
3. Собрать https-ссылку, по которой будет синхронизироваться github
    
    - Формат ссылки: `https://<PERSONAL_ACCESS_TOKEN>@github.com/<USERNAME>/<REPO>.git`,
        
    - Например: `https://ghp_1wKdGc4IhVCHxXEaKClMNp1rEMwsHu1f5zNZ@github.com/myaccount/my-obsidian-vault.git`
        
4. Запустить консоль (`cmd.exe` в windows)
    
    - в консоли перейти в папку OBSIDIAN (`cd /OBSIDIAN`) и оттуда выполнить команду с собранной ссылкой `git clone https://<PERSONAL_ACCESS_TOKEN>@github.com/<USERNAME>/<REPO>.git`
        

> В результате появится папка `OBSIDIAN/my-obsidian-vault`, а в ней файлы из GitHub (`README.md` и `.gitignore`, а также папка `.git` с настройками гитхаба)

#### 3b: создать Хранилище/Vault в Obsidian на основе скаченной папки

![Создание нового Хранилища/Vault в Obsidian](https://habrastorage.org/r/w1560/getpro/habr/upload_files/290/ce2/bb4/290ce2bb4e061c7bafb682ab97363479.png "Создание нового Хранилища/Vault в Obsidian")

Создание нового Хранилища/Vault в Obsidian

1. Из программы Obsidian: открыть синхронизированную папку `my-obsidian-vault` как хранилище
    
2. Теперь можно заполнить "хранилище" заметками и файлами, или просто отредактировать `README.md`
    

> Если у вас уже есть заметки в Obsidian, то алгоритм будет тот же:
> 
> - сначала создать и синхронизировать пустой репозиторий с github
>     
> - затем скопировать туда все файлы из старого хранилища
>     

#### 3с: Настроить синхронизацию через obsidian-плагин 'Git'

![Плагин Git в Obsidian (1/4) - поиск и установка](https://habrastorage.org/r/w1560/getpro/habr/upload_files/707/9ae/22d/7079ae22da30a6e6ea824d7c8573c0ed.png "Плагин Git в Obsidian (1/4) - поиск и установка")

Плагин Git в Obsidian (1/4) - поиск и установка

> **UPDATE**: в новых версиях плагина Obsidian-git, термин "_Backup"_ (на скриншотах далее) уже заменили на термин на "_Commit-and-sync_"

1. В настройках Обсидиана, в разделе "Community plugins" найти и установить плагин 'git'
    
2. Далее, в настройках самого плагина git, установить:
    
    - **Vault Backup Interval (minutes)**: 1
        
    - **Auto Backup after stopping file edits**: ВКЛ  
        
3. **Pull updates on startup**: ВКЛ
    
4. **Disable notifications**: ВКЛ (можно не включать, но тогда каждую минуту будут появляться уведомления)
    

![Плагин Git в Obsidian (2/4) - настройка](https://habrastorage.org/r/w1560/getpro/habr/upload_files/d5f/b64/a79/d5fb64a7997df046c574c4b64e77e0dd.png "Плагин Git в Obsidian (2/4) - настройка")

Плагин Git в Obsidian (2/4) - настройка

![Плагин Git в Obsidian (3/4) - настройка](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b1b/1ac/553/b1b1ac5537fafefef927521d99c88602.png "Плагин Git в Obsidian (3/4) - настройка")

Плагин Git в Obsidian (3/4) - настройка

![Плагин Git в Obsidian (4/4) - настройка](https://habrastorage.org/r/w1560/getpro/habr/upload_files/70a/1e7/7c6/70a1e77c6c97d83d8c41c4aa7f8f0f94.png "Плагин Git в Obsidian (4/4) - настройка")

Плагин Git в Obsidian (4/4) - настройка

Теперь все заметки из этого хранилища, каждую минуту после завершения редактирования, будут загружаться в Github. Также, при запуске Obsidian, последняя версия заметок сразу подгрузится с GitHub.

> Если не хочется ждать минуту, то принудительно загрузить изменения на GitHub можно через Obsidian-команду "Git: Create backup": `CTRL+P`, `git b`. Также (в настройках Obsidian) можно создать горячую клавишу для этой команды (например, `ALT+S`)

### Шаг 4: Синхронизация с мобильным (Android, iOS)

Здесь всё проще, чем на десктопе:

![Поиск и установка плагина Fit в мобильном](https://habrastorage.org/r/w1560/getpro/habr/upload_files/21f/a19/a47/21fa19a47db9990771dc32aef2d71d91.png "Поиск и установка плагина Fit в мобильном")

Поиск и установка плагина Fit в мобильном

1. Открыть приложение Obsidian
    
2. Создать новый **пустой** Vault/Хранилище (не создавать в нём файлы)
    
3. Внутри Obsidian найти и установить community-плагин "Fit"
    
4. В настройках плагина:
    
    - вставить Токен (из шага 1). Именно токен, не url.
        
    - авторизоваться по кнопке "**Authenticate user**"
        
    - **Github repository name**: выбрать из списка, например: `my-obsidian-vault`
        
    - **Branch name**: выбрать `main`. (тут без вариантов)
        
    - **Auto sunc**: выбрать `Muted`
        
    - **Auto check interval**: установить 1 минуту
        
    - **File change**: нажать, чтобы кнопка не горела (и не спамила каждую минуту).
        

Всё, настройка мобильного приложения завершена: Obsidian будет синхронизироваться с GitHub каждую минуту.

#### Недостатки плагина Fit версии v1.1.1

![Кнопка с котиком для принудительной синхронизации через плагин Fit](https://habrastorage.org/r/w1560/getpro/habr/upload_files/a81/c5f/37e/a81c5f37e38821a23c5302bc2c2155e6.png "Кнопка с котиком для принудительной синхронизации через плагин Fit")

Кнопка с котиком для принудительной синхронизации через плагин Fit

_К сожалению, плагин Fit (пока ещё) не умеет делать автосинхронизацию "при старте".  
  
Поэтому, сразу после запуска, чтобы не ждать минуту, можно подтянуть изменения через кнопку с котиком "Fit Sync"._

Также, в текущей версии плагина есть один "баг": если на десктопе удалить ненужную папку-с-файлами (и синхронизировать репозиторий), то на мобильном файлы удалятся, но пустая папка останется ... и её придётся удалить вручную. Неудобно, но такой сценарий случается довольно редко. Плюс есть шанс что автор плагина исправит этот баг.

При этом у плагина есть бесспорное достоинство: работает на мобильном.

### Шаг 5: техника безопасности

**Не редактируйте один и тот же файл одновременно на двух устройствах.**

> _Впрочем, этот совет относится и к Notion: я однажды терял часть текстов в Notion, когда заметка была открыта в нескольких местах_

На самом деле, следовать этому совету легко.

А если что-то пойдёт не так, то Obsidian сообщит о конфликте версий, и с ним придётся разбираться (в то время как Notion молча как-то всё решит сам)

- На десктопе конфликт версий разрешается средствами GIT-а.
    
    - Если кратко: то достаточно отредактировать "конфликтный" файл и удалить из него ненужные строки (в т.ч. служебные), чтобы всё пришло в норму.
        
    - а если одновременно редактировались _разные_ строки заметки, то умный git разрулит всё сам (корректно, незаметно, автоматически)
        
- На мобильном конфликт решается иначе: локальный файл не меняется, но его "внешняя" копия появляется в папке `_FIT`. Нужно смотреть глазами и решать головой, что оставить и что поменять в оригинальном файле.
    

Ещё раз: конфликт версий заметки — это форс-мажор, **скорее всего вы никогда с ним не встретитесь** (если не будете редактировать одну и ту же заметку одновременно на двух устройствах). А если встретитесь — его легко разрулить.

### Вопросы и ответы:

#### Почему на мобильных используется плагин Fit, а не полноценный Git?

Мобильные приложения не могут вызывать другие мобильные приложения, поэтому плагин Obsidian не может вызвать стороннее приложение Git на мобильном.

Плагины Obsidian написаны на JS. В мобильном плагине obsidian-git есть JS-реализация полноценного гит-а… но она ещё сырая (тормозит на большом количестве файлов и спамит алертами).

Поэтому для мобильных устройств приходится использовать не полноценный Git, а плагин Fit, который использует упрощённый GitHub API.

#### Почему на десктопе используется плагин Git, а не простой Fit?

Тут две причины:

- хранение всей истории изменений на локальной машине (в папке .git)
    
- удобство автоматического разруливания конфликта версий, если на разных устройствах одновременно редактировались разные строки одного файла.
    

#### Можно ли использовать только мобильную версию (без десктопа)

Да, вполне. Шаг 3 можно пропустить - всё будет работать.

Правда десктопная версия даёт дополнительную резервную копию с историей изменений (хранится на десктопе), но если отказаться от десктопа — система продолжить работу.

Также можно отказаться от мобильной версии и работать только на десктопе (но зачем?:)

#### Почему каж

[![](https://habrastorage.org/r/w390/getpro/habr/upload_files/9c4/739/ca2/9c4739ca23615541ee739a29706eb1cd.jpg)
##### Подключение своего css файла

- Скопировать свой css файл в /home/kvl/obsidian/.obsidian/snippets
- Пример содержания файла (как обычный css файл)

![[Снимок экрана от 2025-04-25 11-41-31.png]]
- В программе obsidian выбрать настройки (в левом нижнем углу)
- Оформление -> Фрагменты CSS кода
- Нажать обновить
- Отобразится наш файл
- Использование в документе obsidian:

![[Снимок экрана от 2025-04-25 11-44-49 1.png]]
