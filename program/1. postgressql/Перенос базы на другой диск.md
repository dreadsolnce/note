***Назад:*** [[program/1. postgressql/!---Содержание---!|!---Содержание---!]]
```
sudo -u postgres -i
```

```
psql
```

```
SHOW data_directory;
```

> [!NOTE] Title
> **Запомнить каталог**

```
exit
```

```
exit
```

```
sudo systemctl stop postgrespro-std-17.service
```

```
sudo systemctl status postgrespro-std-17.service
```
___
***Скопировать с помощью rsync с сохранением прав доступа***

```
sudo mkdir -p /data/pgpro/std-17/data
```

```
sudo chmod -R 755 /data/pgpro/
```

```
sudo chmod -R 755 /data/pgpro/std-17/
```

```
sudo rsync -av /var/lib/pgpro/std-17/data /data/pgpro/std-17/
```
___
***Сделать копию нового файла postgresql.conf***
```
sudo -u postgres cp /data/pgpro/std-17/data/postgresql.conf /data/pgpro/std-17/data/postgresql.conf.original
```

***Отредактировать новый файл /data/pgpro/std-17/data/postgresql.conf***
```
sudo -u postgres vim /data/pgpro/std-17/data/postgresql.conf
```

**+++** `data_directory = '/data/pgpro/std-17/data'`

***Отредактировать файл /etc/default/postgrespro-std-17 изменив переменную окружения PGDATA на новый путь***
```
sudo cp /etc/default/postgrespro-std-17 /etc/default/postgrespro-std-17.original
```

```
sudo vim /etc/default/postgrespro-std-17
```

**+++** `PGDATA=/data/pgpro/std-17/data`

____
```
sudo systemctl daemon-reload
```

```
sudo systemctl start postgrespro-std-17.service
```

```
sudo systemctl status postgrespro-std-17.service
```

![[Снимок экрана от 2025-11-20 10-36-35 1.png]]

```
sudo mv /var/lib/pgpro/std-17/data /var/lib/pgpro/std-17/data.bak
```

***Назад:*** [[program/1. postgressql/!---Содержание---!|!---Содержание---!]]
