###### ***==Сеть==***
*Вывод ай пи адреса хоста:*
```
hostname -I    
```

```
ip a
```

*Проверка (сканирование) портов с помощью tcpdump:*
```
sudo tcpdump -i enp0s8 port 80 and tcp and src 192.168.192.1
```
###### ***==Поиск==***

*Поиск по содержимому файлов:*
```
grep -i -R "string to find" /etc/apt/*
```
*Поиск по нескольким параметрам:*
```
ufw status verbose | egrep -q -x "(активен|active)"
```

> [!NOTE] ключи
> -q : тихий режим
> -i  : поиск не зависит от регистра
> -R : рекурсивный поиск со всеми подкаталогами
> -x : точное совпадение с целой строкой 
> -w : точное совпадение с целым словом
> -P : использование регулярных выражений
> -v : поиск наоборот (не выводить то что подошло по условию)

*Поиск по имени файла:*
```
find / -name ansible 2> /dev/null
```

*Поиск расположения команды по названию :*
```
command -v ufw
```
```
type <имя команды>
```
```
whereis <имя команды>
```
###### ***==Системные команды==***
*Изменение имени хоста:*
```
sudo hostnamectl hostname <новое имя>
```

*Выключение компьютера из под пользователя:*
```
systemctl poweroff
```

*Запуск sudo без пароля:*
```
sudo visudo
```

> [!NOTE] add string
> <test_user> ALL=(ALL) NOPASSWD: ALL

*Запуск определённой команды через sudo без пароля:*
```
sudo visudo
```
> [!NOTE] add string
> <test_user> ALL=NOPASSWORD:/usr/local/bin/imagel

*Запуск команды от другого пользователя:*
```
sudo -u <test_user> <name prog>
```

Переключение на другого пользователя:
```
sudo -u postgres -i
```

##### ***==Службы==***
*Статус службы (активна/неактивна):*
```
systemctl is-active nftables.service 
```

*Состояние всех сервисов:*
```
systemctl list-units --type=service
```

Состояние только активных служб:
```
systemctl list-units --type=service --state=active
```

*Перезапуск служб:*
```
systemctl restart app
systemctl reload app
```
> Пояснение: `restart` полностью останавливает приложение и запускает его заново, то `reload` просто позволяет приложению перечитать конфигурационный файл, с которым оно работает, без полного перезапуска

[Ссылка на статью:](https://jino.ru/spravka/articles/systemctl.html#systemctl)

##### **==Файлы==**
***Количество  строк в файле:***
```
wc -l 
```

***Размер файлов через команду ls***
```
ls -lh data/
```

***Сравнение двух файлов:***
```
diff style.xml /home/osm/openstreetmap-carto/style.xml
```

***Создание копии файла с дополнительной датой в названии:***
```
cp style.mss style.mss.bak_$(date +%F)
```
> Результат: style.mss.bak_2025-02-28
###### **==Установщик пакетов==**
*Поиск пакета в хранилище репозиториев:*
```
apt-cache search <имя пакета>
```

*Информация установлен пакет или нет:*
```
apt-cache policy <имя пакета>
```
###### ==ssh==
Создание ключ:
```
ssh-keygen -t rsa
```

Скопировать ключ:
```
ssh-copy-id -i <путь для ключа *.pub> <user>@<remote ip>
```

###### **==Вывод информации==**

*Команда **printf**: эта команда была создана для замены всем знакомой команды echo.*

```
printf '%b\n' 'Ваш,\nАлексей Дмитриев'
```

> [!NOTE] Результат:
> Ваш,
> Алексей Дмитриев
> *==т.е. %b понимает управляющие символы, такие как перенос строки==*
 
 ```
printf '%s\n' 'Ваш,\nАлексей Дмитриев'
```
> [!NOTE] Результат:
> Ваш,\nАлексей Дмитриев
> *==т.е. %s не понимает управляющие символы, такие как перенос строки для неё это просто строка==*

 ```
printf '\n│ %-16b │ %-16b │\n' '1 sputnik nii tp' 'test20'
```
> [!NOTE] Результат:
> 
│ 1 sputnik nii tp │ test20 
> 
> *==т.е. %-16b : 16 символов между блоками и выравнивание выполняется по левому краю (знак минус)==* 
> **одновременная работа с кириллицей и английскими буквами не работает как надо, или вообще не работает с кириллицей**

*Команда **tee**: эта команда позволяет перенаправлять вывод информации одновременно как в файл  так и на экран.*

```
cat /var/log/auth.log | tee log.tmp
```

###### **==Регулярные выражения:==**

```
grep -vP "^\s*$" <filename> | tr [:lower:] [:upper:]
```
> ^ - начало строки
> $ - конец строки
> \s - символ пробела
> '*'  - любое количество
> не показывать пустые строки (строки начинающиеся с пробела в любом количестве до конца строки)

создание группы каталогов:
```
mkdir test{0..10}
```

удаление группы каталогов:
```
rm -r test{0..10}
```
###### **==Вспомогательные команды:==**

`tr [:lower:] [:upper:]` - перевод из нижнего регистра в верхний

[Ссылка на статью №1: ](https://aidalinux.ru/w/Printf)
[Ссылка на статью №2:](https://phoenixnap.com/kb/bash-printf)


