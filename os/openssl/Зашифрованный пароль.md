# Настройка подключения по ssh с помощью зашифрованного пароля

## 1. Создание переменной окружения с паролем для шифрования

Добавить в файл .bashrc переменную F содержащую пароль

```
export F="пароль"
```

## 2. Создание файла с зашифрованным паролем


```bash
echo "string_password" | openssl enc -aes-256-cbc -md sha512 -a -pbkdf2 -iter 100000 -salt -pass pass:$F | sudo tee /usr/local/share/passwd/secret_skdpu.txt
```

```bash
cat /usr/local/share/passwd/secret_skdpu.txt
```

![[Снимок экрана от 2026-01-12 11-01-16.png]]

> [!NOTE] Пояснение
> **string_password** : пароль который необходимо зашифровать
> **$F** : переменная окружения, которая содержит пароль для шифрования

## 3. Создание скрипта для подключения

vim connection.sh

```bash
#!/bin/bash

DIR_PASSWD="/usr/local/share/passwd"
SECRET_FILE_SKDPU="secret_skdpu.txt"

PASSWD=`cat $DIR_PASSWD/$SECRET_FILE_SKDPU | openssl enc -aes-256-cbc -md sha512 -a -d -pbkdf2 -iter 100000 -salt -pass pass:$F`
sshpass -p $PASSWD ssh -L 127.0.0.1:12312:<ip_address_server>:22 Interactive@ai-serv1p-<ip_address_server>:SSH:<username>@<ip_address_skdpu>
```

[[os/openssl/!------Содержание------!]]
